<template>
  <div class="section ask3de3" id="exige">
    <b-container-fluid>
      <div class="row title">
        <div class="col-4">
          <hr class="line col-12">
        </div>
        <div class="col-4">
          <h2><span class="pink-font">E</span>xig<span class="blue-font">e</span> #3de3Guate</h2>
        </div>
        <div class="col-4">
          <hr class="line col-12">
        </div>
      </div><!--title-->
    </b-container-fluid>
    <b-container>
      <b-row class="title">
        <div class="col-4">Nombre</div>
        <div class="col-4">Partido</div>
        <div class="col-3">Cargo</div>
        <div class="col-1">Escribele en</div>
      </b-row>
      <b-row v-for="(applicant, index) in aspirant" class="ask">
        <div class="col-4">{{ applicant.name }} {{ applicant.lastname }}</div>
        <div class="col-4">{{ applicant.party_name }}</div>
        <div class="col-3">{{ applicant.aspiredPosition }}</div>
        <div class="col-1">
          <a :href="'https://twitter.com/intent/tweet?text=Esto%20es%20una%20prueba%20%40'+applicant.twitter+'%20fin%20de%20prueba'" data-show-count="false"><img class="sn-btn" src="../assets/twitter-logo.png"/></a>
          <b-button class="ask-icon" v-b-modal="'applicant'+index">
            <img class="sn-btn" alt="Declaraci贸n de Intereses" src="../assets/fb-logo.png"/>
          </b-button>
          <b-modal ok-title="Aceptar" ok-only :id="'applicant'+index" size="lg" title="Instrucciones para compartir en Facebook">
              <div class="declarant-data">
                <span class="modal-text">{{ message.fbCopy }} @{{ applicant.facebook }}</span><b-button v-clipboard:copy="message.fbCopy + '@' + applicant.facebook" v-clipboard:error="copyError" size="sm" variant="outline-light">Copiar</b-button><br/>
                <b-button class="btn btn-fb shareFb" @click="shareFb()">Escribe tu publicaci贸n</b-button><br/>
              </div>
          </b-modal>
        </div>
      </b-row>
    </b-container>
  </div>
</template>

<script>
import {HTTP} from '../../http-constants'
export default {
  name: 'Ask3de3',
  data: function() {
    return {
      message: {
        copySucceeded: null,
        fbCopy: "Publica tu #3de3 para que todos podamos conocer tus intereses ",
        cpError: "La versi贸n de tu navegador no permite usar el bot贸n de copiar, selecciona el texto y copialo manualmente"
      },
      aspirant: [
      ]
    }
  },
  props: {
    msg: String
  },
  methods: {
    shareFb: function(event) {
      FB.ui({
        method: 'share',
        href: 'http://www.3de3.gt'
      }, function(response){});
    },
    copyError: function(event) {
      alert(this.message.cpError);
    },
    getAspirants: function() {
      HTTP.get('/candidatos/exige?format=json')
        .then(response => {
          this.aspirant = response.data
        })
        .catch(e => {
          this.errors = e
        })
    }
  },
  beforeMount() {
    this.getAspirants()
  }
}
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
.title div {
  font-weight:bolder;
  font-size: 1.1em;
  text-align:left;
  margin-top:50px;
}
.ask div {
  text-align:left;
}
.ask {
  padding:15px 0 15px 0;
}
.sn-btn {
  width:25px;
  margin: 0 2px 0 2px;
}
.ask-icon {
  background-color:transparent;
  border:none;
  padding:0;
}
.ask-icon:focus,.ask-icon:active {
   outline: none !important;
   box-shadow: none;
}
.btn-fb {
  background-color: #3b5998;
}
.btn-sm {
  font-size: 0.7em;
  padding: 2px 1px;
  margin-left:10px;
}
</style>
